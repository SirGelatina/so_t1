#include "header.h"

const int ProgramDatabase[][MEMSIZE] = {

	{		// 0
		0b00000010011100110100100000100000, // add $t1, $s3, $s3
		0b11111111111111111111111111111111
		//000000 10011 10011 01001 00000 100000
	},
	{		// 1	
		0b10001101001010000000000000000000, // lw $t0, 0($sp)
		0b11111111111111111111111111111111
		//100011 11101 01000 0000000000000000
	},
	{		// 2
		0b00010001000101010000000000000011, // beq $t0, $s5, exit
		0b11111111111111111111111111111111
		//000100 01000 10101 0000000000000010
	},
	{		// 3
		0b00001000000000000000000000000000, // j loop
		0b11111111111111111111111111111111
		//000010 00000000000000000000000000 
	},
	{		// 4
		0b00000010011100110100100000100010, // sub $t1, $s3, $s3
		0b11111111111111111111111111111111
		//000000 10011 10011 01001 00000 100010
	},
	{		// 5
		0b10101101001100110000000000000000, // sw $s3, 0($sp)
		0b11111111111111111111111111111111
		//101011 11101 10011 0000000000000000
	},
	{		// 6
		0b00000000100001010011000000101010, // slt $a1, $a2, $a3
		0b11111111111111111111111111111111
		//000000 00100 00101 00110 00000 101010
	},
	{		// 7
		0b00000001110011110110100000100100, // and $t5, $t6, $t7 
		0b11111111111111111111111111111111
		//000000 01110 01111 01101 00000 100100
	},
	{		// 8
		0b00000010110101111010100000100101,  // or $s5, $s6, $s7
		0b11111111111111111111111111111111
		//000000 10110 10111 10101 00000 100101
	},
	{		// 9, Fatorial

		// # - 			a0 = entrada
		// 0 - 			sw a0, 0(sp)
		// 4 - 			lw t0, 0(sp) 
		// # - 			t1 = entrada aux para fatorial
		// # - 			t2 = 1 aux para 1
		// # - 			t3 = 0 i do for
		// # - 			t4 = 100
		// 8 - 	fat: 	sub t1 t1 t2
		// 12 - 		beq t1, zero, fim1
		// 16 -			and t3, t3, zero
		// 20 -			add t7, t0, zero 
		// 24 - mul: 	beq t3, t1, fim2 
		// 28 - 	 	add t0 t0 t7
		// 32 - 	 	add t3 t3 t2
		// 36 - 	 	j mul
		// 40 - fim2:	j fat
		// 44 - fim1:	slt t5 t0 t4
		// 48 - 		or t6 t5 zero 

		0b10101111101001000000000000000000, /*0*/
		0b10001111101010000000000000000000, /*4*/
		0b00000001001010100100100000100010, /*8*/
		0b00010001001000000000000000000111, /*12*/
		0b00000001011000000101100000100100, /*16*/
		0b00000001000000000111100000100000, /*20*/
		0b00010001011010010000000000000011, /*24*/
		0b00000001000011110100000000100000, /*28*/
		0b00000001011010100101100000100000, /*32*/
		0b00001000000000000000000000000110, /*36*/
		0b00001000000000000000000000000010, /*40*/
		0b00000001000011000110100000101010, /*44*/
		0b00000001101000000111000000100101, /*48*/
		0b11111111111111111111111111111111

	}
};

/*------------------------------------------------------------------------------------------------*/ 
//	         CorrespondÃªncia entre registradores e posicao no vetor 'reg' de File_register     
//
//     ||     $zero | 0     ||     $t0   | 8     ||     $s0   | 16    ||     $t8   | 24    ||              
//     ||     $at   | 1     ||     $t1   | 9     ||     $s1   | 17    ||     $t9   | 25    || 
//     ||     $v0   | 2     ||	   $t2   | 10    ||     $s2   | 18    ||     $k0   | 26    || 
//     ||     $v1   | 3     ||     $t3   | 11    ||     $s3   | 19    ||     $k1   | 27    || 
//     ||     $a0   | 4     ||     $t4   | 12    ||     $s4   | 20    ||     $gp   | 28    || 
//     ||     $a1   | 5     ||     $t5   | 13    ||     $s5   | 21    ||     $sp   | 29    || 
//     ||     $a2   | 6     ||     $t6   | 14    ||     $s6   | 22    ||     $fp   | 30    || 
//     ||     $a3   | 7     ||     $t7   | 15    ||     $s7   | 23    ||     $ra   | 31    || 
// 	  	    	
/*------------------------------------------------------------------------------------------------*/

void RegisterFile0(int * regfile){
	regfile[6]	= 1; /* a2 = 1 */	
	regfile[7]	= 2;/* a3 = 2 */	
	regfile[8]	= 3; /* t0 = 3 */	
	regfile[14]	= 4; /* t6 = 4 */	
	regfile[15]	= 5; /* t7 = 5 */	
	regfile[19]	= 6; /* s3 = 6 */	
	regfile[21]	= 3; /* s5 = 3 */	
	regfile[22]	= 8; /* s6 = 8 */	
	regfile[23]	= 9; /* s7 = 9 */
}

void RegisterFile1(int * regfile){
	regfile[4]	= 6; 	/* a0 = 6 */
	regfile[8]  = 6;
	regfile[9]	= 6; 	/* t1 = 6 */
	regfile[10]	= 1; 	/* t2 = 1 */
	regfile[12]	= 100; 	/* t4 = 100 */
}

void (* const InitRegister[])(int *) = {
	RegisterFile0,
	RegisterFile1
};
